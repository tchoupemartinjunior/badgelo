<div class="container p-4 mx-auto flex flex-col pt-5 items-center">
    <div>
        <h1 class="text-3xl text-purple-700">Edition Photo</h1>
    </div>

    <div class="flex flex-row  bg-white shadow-lg rounded-lg mx-auto justify-center w-11/12 mt-2">

        <!-- Edition section -->
        <div class="w-1/3 p-4 pl-4 border-purple-200 border-r shadow-lg rounded-lg flex flex-col justify-between">
            <div class="border-b border-gray-200 mb-4">
                <nav class="-mb-px flex gap-6">
                    @for(tab of tabs; track tab.key) {
                    <button (click)="activeTab = tab.key"
                        class="border-b-2 px-1 pb-2 text-sm font-medium hover:cursor-pointer" [ngClass]="activeTab === tab.key 
                ? 'border-purple-600 text-purple-600' 
                : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'">
                        {{ tab.label }}
                    </button>
                    }
                </nav>
            </div>
            <div class="flex-grow">
                @switch(activeTab) {
                @case('photo') {
                <bdge-photo-editor />
                }}
            </div>

            <div>
                <button (click)="editorStateService.resetEditor()" class="bg-gray-700 text-white text-base font-medium
           px-6 py-3 rounded-lg shadow-md
           hover:border-gray-300 hover:shadow-lg hover:cursor-pointer
           transition duration-200 ease-in-out">Réinitialiser les modifications</button>
            </div>
        </div>


        <!-- Preview section -->
        <div class="w-2/3 p-4 flex flex-col items-center bg-gray-50">
            <h2>Aperçu de l'image</h2>
            <bdge-preview></bdge-preview>
            <canvas #canvas hidden></canvas>

            <div class="flex flex-row space-x-4 mt-4 justify-center items-center">
                <bdge-upload-button (fileSelected)="fileUploadService.upload($event)"
                    class="bg-gray-100"></bdge-upload-button>
                <button (click)="download()" class="bg-purple-700 text-white text-base font-medium
           px-6 py-3 rounded-lg shadow-md
           hover:bg-purple-600 hover:shadow-lg
           transition duration-200 ease-in-out">Téléchargez l'image</button>
            </div>
        </div>

    </div>

</div>